<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='openai.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='wrapper.css') }}">
</head>
<body>
    <!-- Left Sidebar Menu -->
    <div class="left-sidebar" id="left-sidebar">
        <div class="sidebar-header">
            <h3>âš™ï¸ Menu</h3>
            <button class="close-sidebar-btn" id="close-sidebar-btn">âœ•</button>
        </div>
        
        <div class="sidebar-content">
            <!-- Language Section -->
            <div class="menu-section">
                <h4>ğŸŒ Language / Langue / Idioma</h4>
                <div class="menu-item">
                    <label for="language-select">Language:</label>
                    <select id="language-select" class="language-select">
                        <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                        <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                        <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                    </select>
                </div>
            </div>

            <!-- Appearance Section -->
            <div class="menu-section">
                <h4 data-i18n="menu.appearance">ğŸ¨ Appearance</h4>
                <div class="menu-item dark-mode-item">
                    <label class="toggle-label-enhanced">
                        <span class="toggle-text" data-i18n="menu.darkMode">ğŸŒ™ Dark Mode</span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="dark-mode-toggle" class="toggle-checkbox">
                            <span class="toggle-slider-enhanced"></span>
                        </div>
                    </label>
                </div>
                <div class="menu-item">
                    <label for="theme-select" data-i18n="menu.theme">Theme:</label>
                    <select id="theme-select" class="theme-select">
                        <option value="default" data-i18n="theme.default">Default</option>
                        <option value="halloween">ğŸƒ Halloween</option>
                        <option value="christmas">ğŸ„ Christmas</option>
                        <option value="spring">ğŸŒ¸ Spring</option>
                        <option value="ocean">ğŸŒŠ Ocean</option>
                    </select>
                </div>
            </div>

            <!-- Auto-Play Section -->
            <div class="menu-section">
                <h4 data-i18n="menu.autoPlay">ğŸ¤– Auto-Play</h4>
                <button class="menu-button auto-play-menu-btn" id="menu-auto-play-btn" data-i18n="menu.startAutoPlay">â–¶ï¸ Start Auto-Play</button>
                <div class="menu-item">
                    <label data-i18n="menu.playerAI">Player AI Level:</label>
                    <select id="auto-player-difficulty" class="difficulty-select">
                        <option value="easy" data-i18n="difficulty.easyRandom">Easy (Random)</option>
                        <option value="medium" data-i18n="difficulty.mediumAdaptive">Medium (Adaptive)</option>
                        <option value="hard" selected data-i18n="difficulty.hardPredictive">Hard (Predictive)</option>
                        <option value="veryhard" data-i18n="difficulty.veryHardMaster">Very Hard (Master)</option>
                    </select>
                </div>
                <div class="menu-item">
                    <label data-i18n="menu.speed">Speed:</label>
                    <select id="auto-play-speed" class="speed-select">
                        <option value="slow" data-i18n="speed.slow">Slow (2s)</option>
                        <option value="normal" data-i18n="speed.normal">Normal (1.5s)</option>
                        <option value="fast" selected data-i18n="speed.fast">Fast (0.8s)</option>
                        <option value="turbo" data-i18n="speed.turbo">Turbo (0.3s)</option>
                    </select>
                </div>
            </div>

            <!-- AI Analysis Section -->
            <div class="menu-section">
                <h4 data-i18n="menu.aiAnalysis">ğŸ§  AI Analysis</h4>
                <button class="menu-button" id="show-analysis-btn" data-i18n="menu.viewPattern">View Local Pattern Analysis</button>
                <button class="menu-button" id="show-openai-btn" data-i18n="menu.viewOpenAI">ğŸ¤– View OpenAI Commentary</button>
                <div class="ai-analysis-content" id="ai-analysis-content" style="display: none;">
                    <div class="analysis-subsection">
                        <h5 data-i18n="analysis.patternDetection">Pattern Detection - Last 50 Games</h5>
                        <div id="pattern-messages-menu" class="pattern-messages-menu">
                            <p class="pattern-placeholder" data-i18n="analysis.playForAnalysis">Play a few rounds for AI analysis...</p>
                        </div>
                    </div>
                    <div class="analysis-subsection">
                        <h5 data-i18n="analysis.strategyTips">ğŸ’¡ Strategy Tips</h5>
                        <div id="strategy-messages-menu" class="strategy-messages-menu">
                            <p class="strategy-placeholder" data-i18n="analysis.strategiesAppear">Strategies will appear here...</p>
                        </div>
                    </div>
                    <div class="analysis-subsection">
                        <h5 data-i18n="analysis.winRates">ğŸ“ˆ Win Rates</h5>
                        <div id="win-rates-menu" class="win-rates-menu">
                            <div class="win-rate-item">
                                <span data-i18n="stats.overall">Overall:</span>
                                <span id="overall-win-rate" class="win-rate-value">--%</span>
                            </div>
                            <div class="win-rate-item">
                                <span>âœŠ <span data-i18n="hand.rock">Rock</span>:</span>
                                <span id="rock-win-rate" class="win-rate-value">--%</span>
                            </div>
                            <div class="win-rate-item">
                                <span>âœ‹ <span data-i18n="hand.paper">Paper</span>:</span>
                                <span id="paper-win-rate" class="win-rate-value">--%</span>
                            </div>
                            <div class="win-rate-item">
                                <span>âœŒï¸ <span data-i18n="hand.scissors">Scissors</span>:</span>
                                <span id="scissors-win-rate" class="win-rate-value">--%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics & Analysis -->
            <div class="menu-section">
                <h4 data-i18n="menu.statistics">ğŸ“Š Statistics</h4>
                <button class="menu-button" id="show-stats-btn" data-i18n="menu.viewHandStats">ğŸ“Š Aggregated Data</button>
                <button class="menu-button" id="show-trends-btn" data-i18n="menu.showTrendGraph">ğŸ“ˆ Trend Graph</button>
            </div>

            <!-- Game Actions -->
            <div class="menu-section">
                <h4 data-i18n="menu.game">ğŸ® Game</h4>
                <button class="menu-button" id="menu-reset-btn" data-i18n="menu.resetScores">Reset Scores</button>
            </div>

            <!-- GitHub Repository -->
            <div class="menu-section">
                <button class="menu-button github-link-btn" onclick="window.open('https://github.com/GaryHostt/rock-paper-scissors', '_blank')">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: middle; margin-right: 8px;">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    GitHub Repository
                </button>
            </div>
        </div>
    </div>

    <!-- Pattern Detection Sidebar (Hidden by default) -->
    <div class="pattern-sidebar hidden" id="pattern-sidebar">
        <div class="pattern-header">
            <h3>ğŸ§  AI Analysis</h3>
        </div>
        <div class="pattern-content">
            <div class="pattern-section">
                <h4>Pattern Detection</h4>
                <div id="pattern-messages" class="pattern-messages">
                    <p class="pattern-placeholder">Play a few rounds for AI analysis...</p>
                </div>
            </div>
            <div class="pattern-section">
                <h4>ğŸ’¡ Strategy Tips</h4>
                <div id="strategy-messages" class="strategy-messages">
                    <p class="strategy-placeholder">Strategies will appear here...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Game Container -->
    <div class="main-game-wrapper">
    <div class="container">
        <button class="menu-toggle-btn" id="menu-toggle-btn">â˜°</button>
        
        <div class="game-title-section">
            <div class="title-column">
                <span class="title-emoji">âœŠ</span>
                <span class="title-text" data-i18n="hand.rock">Rock</span>
            </div>
            <div class="title-column">
                <span class="title-emoji">âœ‹</span>
                <span class="title-text" data-i18n="hand.paper">Paper</span>
            </div>
            <div class="title-column">
                <span class="title-emoji">âœŒï¸</span>
                <span class="title-text" data-i18n="hand.scissors">Scissors</span>
            </div>
        </div>
        
        <div class="score-board">
            <div class="score-item">
                <div class="score-label" data-i18n="game.you">You</div>
                <div class="score-value" id="player-score">0</div>
            </div>
            <div class="score-item">
                <div class="score-label" data-i18n="game.ties">Ties</div>
                <div class="score-value" id="tie-score">0</div>
            </div>
            <div class="score-item">
                <div class="score-label" data-i18n="game.computer">Computer</div>
                <div class="score-value" id="computer-score">0</div>
            </div>
        </div>

        <div class="streak-display" id="streak-display">
            <div class="streak-content">
                <span class="streak-emoji" id="streak-emoji">ğŸ”¥</span>
                <span class="streak-text" id="streak-text" data-i18n="streak.noStreak">No Streak</span>
            </div>
        </div>

        <div class="longest-streaks-container">
            <div class="longest-streak-box winning">
                <div class="streak-label" data-i18n="streak.longestWinning">Longest Winning Streak</div>
                <div class="streak-number" id="longest-winning-streak">0</div>
            </div>
            <div class="longest-streak-box losing">
                <div class="streak-label" data-i18n="streak.longestLosing">Longest Losing Streak</div>
                <div class="streak-number" id="longest-losing-streak">0</div>
            </div>
        </div>

        <div class="difficulty-selector">
            <div class="difficulty-label" data-i18n="game.opponentDifficulty">Opponent Difficulty:</div>
            <div class="difficulty-buttons">
                <button class="difficulty-btn active" data-difficulty="easy">
                    ğŸ˜Š <span data-i18n="difficulty.easy">Easy</span>
                </button>
                <button class="difficulty-btn" data-difficulty="medium">
                    ğŸ¤” <span data-i18n="difficulty.medium">Medium</span>
                </button>
                <button class="difficulty-btn" data-difficulty="hard">
                    ğŸ˜ˆ <span data-i18n="difficulty.hard">Hard</span>
                </button>
                <button class="difficulty-btn" data-difficulty="veryhard">
                    ğŸ‘¹ <span data-i18n="difficulty.veryHard">Very Hard</span>
                </button>
            </div>
        </div>

        <div class="game-area">
            <div class="choices">
                <button class="choice-btn" data-choice="rock">
                    <span class="emoji">âœŠ</span>
                    <span class="choice-label" data-i18n="hand.rock">Rock</span>
                </button>
                <button class="choice-btn" data-choice="paper">
                    <span class="emoji">âœ‹</span>
                    <span class="choice-label" data-i18n="hand.paper">Paper</span>
                </button>
                <button class="choice-btn" data-choice="scissors">
                    <span class="emoji">âœŒï¸</span>
                    <span class="choice-label" data-i18n="hand.scissors">Scissors</span>
                </button>
            </div>

            <div class="result-area" id="result-area">
                <div class="result-message" id="result-message" data-i18n="game.chooseMove">Choose your move!</div>
                <div class="battle-display" id="battle-display"></div>
            </div>
        </div>

        <div class="winning-hand-container" id="winning-hand-container">
            <div class="winning-hand-label" data-i18n="game.winningHand">Winning Hand:</div>
            <div class="winning-hand-display" id="winning-hand-display">
                <div class="hand-circle">
                    <span class="winning-emoji" id="winning-emoji">?</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Panels Container -->
    <div class="bottom-panels">
        <!-- OpenAI Commentary Panel -->
        <div class="openai-sidebar" id="openai-sidebar">
            <div class="openai-header">
                <h3>ğŸ’¬ ChatGPT Commentary</h3>
                <button class="close-openai-btn" id="close-openai-btn">âœ•</button>
            </div>
            <div class="openai-content" id="openai-content">
                <div class="openai-placeholder">
                    <p data-i18n="openai.placeholder">Click "View OpenAI Commentary" to get AI-powered analysis of your gameplay.</p>
                </div>
            </div>
            <div class="openai-loading" id="openai-loading" style="display: none;">
                <div class="spinner"></div>
                <p data-i18n="openai.loading">Analyzing your gameplay...</p>
            </div>
        </div>
        
        <!-- Statistics Panel -->
        <div class="stats-panel" id="stats-panel">
            <div class="stats-panel-header">
                <h3>ğŸ“Š Aggregated Data</h3>
                <button class="close-stats-btn" id="close-stats-btn">âœ•</button>
            </div>
            <div class="hand-stats">
                <div class="hand-stat-card">
                    <div class="hand-stat-icon">âœŠ</div>
                    <div class="hand-stat-title" data-i18n="hand.rock">Rock</div>
                    <div class="hand-stat-details">
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.wins">Wins:</span>
                            <span class="stat-value wins" id="rock-wins">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.losses">Losses:</span>
                            <span class="stat-value losses" id="rock-losses">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.ties">Ties:</span>
                            <span class="stat-value ties" id="rock-ties">0</span>
                        </div>
                        <div class="stat-row total">
                            <span class="stat-label" data-i18n="stats.totalPlayed">Total Played:</span>
                            <span class="stat-value" id="rock-total">0</span>
                        </div>
                        <div class="stat-row winrate">
                            <span class="stat-label" data-i18n="stats.winRate">Win Rate:</span>
                            <span class="stat-value" id="rock-winrate">0%</span>
                        </div>
                    </div>
                </div>

                <div class="hand-stat-card">
                    <div class="hand-stat-icon">âœ‹</div>
                    <div class="hand-stat-title" data-i18n="hand.paper">Paper</div>
                    <div class="hand-stat-details">
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.wins">Wins:</span>
                            <span class="stat-value wins" id="paper-wins">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.losses">Losses:</span>
                            <span class="stat-value losses" id="paper-losses">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.ties">Ties:</span>
                            <span class="stat-value ties" id="paper-ties">0</span>
                        </div>
                        <div class="stat-row total">
                            <span class="stat-label" data-i18n="stats.totalPlayed">Total Played:</span>
                            <span class="stat-value" id="paper-total">0</span>
                        </div>
                        <div class="stat-row winrate">
                            <span class="stat-label" data-i18n="stats.winRate">Win Rate:</span>
                            <span class="stat-value" id="paper-winrate">0%</span>
                        </div>
                    </div>
                </div>

                <div class="hand-stat-card">
                    <div class="hand-stat-icon">âœŒï¸</div>
                    <div class="hand-stat-title" data-i18n="hand.scissors">Scissors</div>
                    <div class="hand-stat-details">
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.wins">Wins:</span>
                            <span class="stat-value wins" id="scissors-wins">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.losses">Losses:</span>
                            <span class="stat-value losses" id="scissors-losses">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.ties">Ties:</span>
                            <span class="stat-value ties" id="scissors-ties">0</span>
                        </div>
                        <div class="stat-row total">
                            <span class="stat-label" data-i18n="stats.totalPlayed">Total Played:</span>
                            <span class="stat-value" id="scissors-total">0</span>
                        </div>
                        <div class="stat-row winrate">
                            <span class="stat-label" data-i18n="stats.winRate">Win Rate:</span>
                            <span class="stat-value" id="scissors-winrate">0%</span>
                        </div>
                    </div>
                </div>

                <div class="hand-stat-card overall-card">
                    <div class="hand-stat-icon">ğŸ“Š</div>
                    <div class="hand-stat-title" data-i18n="stats.overall">Overall</div>
                    <div class="hand-stat-details">
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.wins">Wins:</span>
                            <span class="stat-value wins" id="overall-wins">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.losses">Losses:</span>
                            <span class="stat-value losses" id="overall-losses">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label" data-i18n="stats.ties">Ties:</span>
                            <span class="stat-value ties" id="overall-ties">0</span>
                        </div>
                        <div class="stat-row total">
                            <span class="stat-label" data-i18n="stats.totalPlayed">Total Played:</span>
                            <span class="stat-value" id="overall-total">0</span>
                        </div>
                        <div class="stat-row winrate">
                            <span class="stat-label" data-i18n="stats.winRate">Win Rate:</span>
                            <span class="stat-value" id="overall-winrate">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trend Graph Panel -->
        <div class="modal" id="trend-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="trend-graph-title" data-i18n="trends.title">ğŸ“ˆ Data from last 50 games</h3>
                    <button class="close-modal-btn" id="close-trend-modal">âœ•</button>
                </div>
                <div class="modal-body">
                    <canvas id="trend-chart" width="600" height="300"></canvas>
                <div class="trend-stats">
                    <div class="trend-stat">
                        <span class="trend-label">Total Games:</span>
                        <span id="total-games-stat" class="trend-value">0</span>
                    </div>
                    <div class="trend-stat">
                        <span class="trend-label">Current Streak:</span>
                        <span id="current-streak-stat" class="trend-value">0</span>
                    </div>
                    <div class="trend-stat">
                        <span class="trend-label">Best Streak:</span>
                        <span id="best-streak-stat" class="trend-value">0</span>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='chart.min.js') }}"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>

